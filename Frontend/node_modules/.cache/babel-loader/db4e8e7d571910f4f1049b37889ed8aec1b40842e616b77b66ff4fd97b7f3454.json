{"ast":null,"code":"import _objectSpread from\"/Users/mohamed/school-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const StudentDashboard=()=>{const{id}=useParams();// Exam ID from the URL\nconst[exam,setExam]=useState(null);// Exam details\nconst[answers,setAnswers]=useState({});const[submitted,setSubmitted]=useState(false);const[feedback,setFeedback]=useState(null);// Analysis feedback\n// Fetch exam details by ID\nuseEffect(()=>{axios.get(\"http://localhost:5001/exam/\".concat(id)).then(response=>setExam(response.data.exam)).catch(error=>console.error(\"Failed to load exam:\",error));},[id]);// Handle changes in answers\nconst handleAnswerChange=(questionId,value)=>{setAnswers(_objectSpread(_objectSpread({},answers),{},{[questionId]:value}));};// Submit answers for analysis\nconst handleSubmit=()=>{if(Object.values(answers).some(answer=>!answer.trim())){alert(\"Please answer all questions before submitting!\");return;}const submissions=exam.questions.map(q=>({question:q.question,answer:answers[q.id]||\"\"}));axios.post(\"http://localhost:5001/api/analyse-answers\",{email:\"lilac@student.esl.com\",// Replace with dynamic student email\nsubmissions}).then(response=>{setFeedback(response.data.feedback);setSubmitted(true);}).catch(error=>console.error(\"Failed to submit answers:\",error));};if(!exam){return/*#__PURE__*/_jsx(\"div\",{children:\"Loading exam details...\"});}return/*#__PURE__*/_jsx(\"div\",{className:\"min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-200 via-blue-300 to-blue-500\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white shadow-lg rounded-lg p-6 w-full max-w-lg\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold text-center mb-6\",children:submitted?\"Feedback\":\"Exam\"}),!submitted?/*#__PURE__*/_jsxs(\"div\",{children:[exam.questions.map(q=>/*#__PURE__*/_jsxs(\"div\",{className:\"mb-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:q.question}),/*#__PURE__*/_jsx(\"textarea\",{className:\"border p-2 w-full rounded\",rows:\"3\",placeholder:\"Write your answer here...\",onChange:e=>handleAnswerChange(q.id,e.target.value)})]},q.id)),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded w-full\",onClick:handleSubmit,children:\"Submit Answers\"})]}):/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-lg font-semibold\",children:\"Your Feedback\"}),feedback.map((item,index)=>/*#__PURE__*/_jsxs(\"div\",{className:\"my-4\",children:[/*#__PURE__*/_jsx(\"p\",{className:\"font-semibold\",children:item.question}),/*#__PURE__*/_jsx(\"p\",{className:\"bg-gray-100 p-2 rounded\",dangerouslySetInnerHTML:{__html:item.highlightedAnswer}}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Score:\"}),\" \",item.score,\"%\"]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Rating:\"}),\" \",item.rating]})]},index))]})]})});};export default StudentDashboard;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","jsx","_jsx","jsxs","_jsxs","StudentDashboard","id","exam","setExam","answers","setAnswers","submitted","setSubmitted","feedback","setFeedback","get","concat","then","response","data","catch","error","console","handleAnswerChange","questionId","value","_objectSpread","handleSubmit","Object","values","some","answer","trim","alert","submissions","questions","map","q","question","post","email","children","className","rows","placeholder","onChange","e","target","onClick","item","index","dangerouslySetInnerHTML","__html","highlightedAnswer","score","rating"],"sources":["/Users/mohamed/school-dashboard/src/pages/StudentDashboard.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst StudentDashboard = () => {\n  const { id } = useParams(); // Exam ID from the URL\n  const [exam, setExam] = useState(null); // Exam details\n  const [answers, setAnswers] = useState({});\n  const [submitted, setSubmitted] = useState(false);\n  const [feedback, setFeedback] = useState(null); // Analysis feedback\n\n  // Fetch exam details by ID\n  useEffect(() => {\n    axios\n      .get(`http://localhost:5001/exam/${id}`)\n      .then((response) => setExam(response.data.exam))\n      .catch((error) => console.error(\"Failed to load exam:\", error));\n  }, [id]);\n\n  // Handle changes in answers\n  const handleAnswerChange = (questionId, value) => {\n    setAnswers({ ...answers, [questionId]: value });\n  };\n\n  // Submit answers for analysis\n  const handleSubmit = () => {\n    if (Object.values(answers).some((answer) => !answer.trim())) {\n      alert(\"Please answer all questions before submitting!\");\n      return;\n    }\n\n    const submissions = exam.questions.map((q) => ({\n      question: q.question,\n      answer: answers[q.id] || \"\",\n    }));\n\n    axios\n      .post(\"http://localhost:5001/api/analyse-answers\", {\n        email: \"lilac@student.esl.com\", // Replace with dynamic student email\n        submissions,\n      })\n      .then((response) => {\n        setFeedback(response.data.feedback);\n        setSubmitted(true);\n      })\n      .catch((error) => console.error(\"Failed to submit answers:\", error));\n  };\n\n  if (!exam) {\n    return <div>Loading exam details...</div>;\n  }\n\n  return (\n    <div className=\"min-h-screen flex items-center justify-center bg-gradient-to-r from-blue-200 via-blue-300 to-blue-500\">\n      <div className=\"bg-white shadow-lg rounded-lg p-6 w-full max-w-lg\">\n        <h1 className=\"text-2xl font-bold text-center mb-6\">\n          {submitted ? \"Feedback\" : \"Exam\"}\n        </h1>\n        {!submitted ? (\n          <div>\n            {exam.questions.map((q) => (\n              <div key={q.id} className=\"mb-4\">\n                <p className=\"font-semibold\">{q.question}</p>\n                <textarea\n                  className=\"border p-2 w-full rounded\"\n                  rows=\"3\"\n                  placeholder=\"Write your answer here...\"\n                  onChange={(e) => handleAnswerChange(q.id, e.target.value)}\n                />\n              </div>\n            ))}\n            <button\n              className=\"bg-blue-500 text-white px-4 py-2 rounded w-full\"\n              onClick={handleSubmit}\n            >\n              Submit Answers\n            </button>\n          </div>\n        ) : (\n          <div>\n            <h2 className=\"text-lg font-semibold\">Your Feedback</h2>\n            {feedback.map((item, index) => (\n              <div key={index} className=\"my-4\">\n                <p className=\"font-semibold\">{item.question}</p>\n                <p\n                  className=\"bg-gray-100 p-2 rounded\"\n                  dangerouslySetInnerHTML={{ __html: item.highlightedAnswer }}\n                />\n                <p>\n                  <strong>Score:</strong> {item.score}%\n                </p>\n                <p>\n                  <strong>Rating:</strong> {item.rating}\n                </p>\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default StudentDashboard;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}