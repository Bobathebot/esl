{"ast":null,"code":"import _objectSpread from\"/Users/mohamed/school-dashboard/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect}from\"react\";import{useParams}from\"react-router-dom\";import axios from\"axios\";import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const ExamPage=()=>{const{id}=useParams();// Extract exam ID from URL\nconst[exam,setExam]=useState(null);const[answers,setAnswers]=useState({});// Track answers for each question\nconst[timer,setTimer]=useState(null);// Timer for the exam\nuseEffect(()=>{axios.get(\"http://localhost:5001/exam/\".concat(id)).then(response=>{setExam(response.data.exam);setTimer(response.data.exam.duration*60);// Convert duration to seconds\n}).catch(error=>{var _error$response;console.error(\"Error fetching exam:\",((_error$response=error.response)===null||_error$response===void 0?void 0:_error$response.data)||error.message);alert(\"Failed to load exam. Please try again.\");});},[id]);// Timer countdown\nuseEffect(()=>{if(timer>0){const interval=setInterval(()=>setTimer(prev=>prev-1),1000);return()=>clearInterval(interval);}},[timer]);const handleSubmit=()=>{axios.post(\"http://localhost:5001/api/submissions\",{examId:id,answers}).then(()=>alert(\"Exam submitted successfully!\")).catch(error=>{var _error$response2;console.error(\"Error submitting exam:\",((_error$response2=error.response)===null||_error$response2===void 0?void 0:_error$response2.data)||error.message);alert(\"Failed to submit exam. Please try again.\");});};if(!exam)return/*#__PURE__*/_jsx(\"p\",{children:\"Loading exam...\"});return/*#__PURE__*/_jsxs(\"div\",{className:\"min-h-screen flex flex-col items-center justify-center bg-gray-100\",children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-2xl font-bold mb-4\",children:\"Exam - \".concat(exam.id)}),/*#__PURE__*/_jsx(\"p\",{children:\"Time Remaining: \".concat(Math.floor(timer/60),\":\").concat(String(timer%60).padStart(2,\"0\"))}),exam.questions.map(q=>/*#__PURE__*/_jsxs(\"div\",{className:\"bg-white p-4 shadow rounded mb-4 w-full max-w-md\",children:[/*#__PURE__*/_jsx(\"p\",{children:q.question}),/*#__PURE__*/_jsx(\"textarea\",{className:\"w-full mt-2 p-2 border rounded\",rows:\"4\",value:answers[q.id]||\"\",onChange:e=>setAnswers(_objectSpread(_objectSpread({},answers),{},{[q.id]:e.target.value}))})]},q.id)),/*#__PURE__*/_jsx(\"button\",{className:\"bg-blue-500 text-white px-4 py-2 rounded mt-4\",onClick:handleSubmit,children:\"Submit Exam\"})]});};export default ExamPage;","map":{"version":3,"names":["React","useState","useEffect","useParams","axios","jsx","_jsx","jsxs","_jsxs","ExamPage","id","exam","setExam","answers","setAnswers","timer","setTimer","get","concat","then","response","data","duration","catch","error","_error$response","console","message","alert","interval","setInterval","prev","clearInterval","handleSubmit","post","examId","_error$response2","children","className","Math","floor","String","padStart","questions","map","q","question","rows","value","onChange","e","_objectSpread","target","onClick"],"sources":["/Users/mohamed/school-dashboard/src/pages/ExamPage.jsx"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useParams } from \"react-router-dom\";\nimport axios from \"axios\";\n\nconst ExamPage = () => {\n  const { id } = useParams(); // Extract exam ID from URL\n  const [exam, setExam] = useState(null);\n  const [answers, setAnswers] = useState({}); // Track answers for each question\n  const [timer, setTimer] = useState(null); // Timer for the exam\n\n  useEffect(() => {\n    axios\n      .get(`http://localhost:5001/exam/${id}`)\n      .then((response) => {\n        setExam(response.data.exam);\n        setTimer(response.data.exam.duration * 60); // Convert duration to seconds\n      })\n      .catch((error) => {\n        console.error(\"Error fetching exam:\", error.response?.data || error.message);\n        alert(\"Failed to load exam. Please try again.\");\n      });\n  }, [id]);\n\n  // Timer countdown\n  useEffect(() => {\n    if (timer > 0) {\n      const interval = setInterval(() => setTimer((prev) => prev - 1), 1000);\n      return () => clearInterval(interval);\n    }\n  }, [timer]);\n\n  const handleSubmit = () => {\n    axios\n      .post(\"http://localhost:5001/api/submissions\", {\n        examId: id,\n        answers,\n      })\n      .then(() => alert(\"Exam submitted successfully!\"))\n      .catch((error) => {\n        console.error(\"Error submitting exam:\", error.response?.data || error.message);\n        alert(\"Failed to submit exam. Please try again.\");\n      });\n  };\n\n  if (!exam) return <p>Loading exam...</p>;\n\n  return (\n    <div className=\"min-h-screen flex flex-col items-center justify-center bg-gray-100\">\n      <h1 className=\"text-2xl font-bold mb-4\">{`Exam - ${exam.id}`}</h1>\n      <p>{`Time Remaining: ${Math.floor(timer / 60)}:${String(timer % 60).padStart(2, \"0\")}`}</p>\n      {exam.questions.map((q) => (\n        <div key={q.id} className=\"bg-white p-4 shadow rounded mb-4 w-full max-w-md\">\n          <p>{q.question}</p>\n          <textarea\n            className=\"w-full mt-2 p-2 border rounded\"\n            rows=\"4\"\n            value={answers[q.id] || \"\"}\n            onChange={(e) => setAnswers({ ...answers, [q.id]: e.target.value })}\n          />\n        </div>\n      ))}\n      <button className=\"bg-blue-500 text-white px-4 py-2 rounded mt-4\" onClick={handleSubmit}>\n        Submit Exam\n      </button>\n    </div>\n  );\n};\n\nexport default ExamPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}